{
  "permissions": {
    "allow": [
      "Bash(git -C \"C:\\\\Users\\\\Dell\\\\source\\\\repos\\\\praxis_django\" log --oneline -5)",
      "Bash(git -C \"C:\\\\Users\\\\Dell\\\\source\\\\repos\\\\praxis_django\" status)",
      "Bash(pip:*)",
      "Bash(django-admin:*)",
      "Bash(python manage.py makemigrations:*)",
      "Bash(python manage.py migrate:*)",
      "Bash(python manage.py check:*)",
      "Bash(python -c \"import django; import os; os.environ.setdefault\\(''DJANGO_SETTINGS_MODULE'', ''config.settings.dev''\\); django.setup\\(\\); from django.contrib.admin.sites import site; print\\([f''{m._meta.app_label}.{m.__name__}'' for m in site._registry]\\)\")",
      "Bash(python:*)",
      "Bash(set DJANGO_SETTINGS_MODULE=config.settings.dev)",
      "Bash(where:*)",
      "Bash(start \"\" \"C:\\\\Users\\\\matheus.martino\\\\source\\\\repos_personal\\\\Praxis_CRM\\\\docs\\\\manual_usuario.html\")",
      "Bash(dir:*)",
      "Bash(ls \"C:\\\\Users\\\\matheus.martino\\\\source\\\\repos_personal\\\\Praxis_CRM\\\\templates\\\\includes\"\" 2>nul || echo \"Directory does not exist \")",
      "Bash(findstr:*)",
      "Bash(grep:*)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py check --settings=config.settings.dev 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py makemigrations carteira_ativa --check --settings=config.settings.dev 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py makemigrations crm --settings=config.settings.dev 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py makemigrations carteira_ativa --settings=config.settings.dev 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py seed_carteira_ativa --settings=config.settings.dev 2>&1)",
      "Bash(python3:*)",
      "Bash(cd:*)",
      "Bash(head:*)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe -c \"\nimport sys\nsys.stdout.reconfigure\\(encoding='utf-8'\\)\ncontent = open\\('apps/carteira_ativa/management/commands/seed_carteira_ativa.py', encoding='utf-8'\\).read\\(\\)\nbad = set\\(\\)\nfor c in content:\n    if ord\\(c\\) > 0xFF:\n        bad.add\\(repr\\(c\\)\\)\nfor b in sorted\\(bad\\): print\\(b\\)\n\" 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py shell --settings=config.settings.dev -c \"\nfrom django.utils import timezone\nfrom datetime import timedelta\nfrom apps.crm.models import Cliente\nfrom apps.carteira_ativa.models import ContatoCarteira\nfrom apps.carteira_ativa.utils import calcular_semaforo\n\nclientes = Cliente.objects.filter\\(nome__startswith='Cliente Teste'\\).order_by\\('nome'\\)\nprint\\(f'Total clientes: {clientes.count\\(\\)}'\\)\nprint\\(\\)\n\ngrupos = {'sem_contato': 0, 'verde': 0, 'amarelo': 0, 'vermelho': 0}\nfor c in clientes:\n    sem = calcular_semaforo\\(c.data_ultimo_contato\\)\n    grupos[sem] += 1\n    contatos = ContatoCarteira.objects.filter\\(cliente=c\\).count\\(\\)\n    print\\(f'  {c.nome} | {sem:12s} | contatos={contatos}'\\)\n\nprint\\(\\)\nprint\\('Contagem por semaforo:', grupos\\)\nprint\\('Total ContatoCarteira:', ContatoCarteira.objects.filter\\(cliente__nome__startswith='Cliente Teste'\\).count\\(\\)\\)\n\" 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py shell --settings=config.settings.dev -c \"\nimport sys\nsys.stdout.reconfigure\\(encoding='utf-8'\\)\nfrom django.contrib.auth import get_user_model\nfrom apps.carteira_ativa.services import obter_metricas_dashboard\n\nUser = get_user_model\\(\\)\ngestor1 = User.objects.get\\(username='gestor1'\\)\nmetricas = obter_metricas_dashboard\\(gestor1\\)\n\nprint\\('=== KPIs ==='\\)\nfor k, v in metricas['kpis'].items\\(\\):\n    print\\(f'  {k}: {v}'\\)\n\nprint\\(\\)\nprint\\('=== Por vendedor ==='\\)\nfor row in metricas['por_vendedor']:\n    print\\(f'  {row[\\\\\"nome_vendedor\\\\\"]}: total={row[\\\\\"total\\\\\"]} sem={row[\\\\\"sem_contato\\\\\"]} verde={row[\\\\\"verde\\\\\"]} amarelo={row[\\\\\"amarelo\\\\\"]} vermelho={row[\\\\\"vermelho\\\\\"]}'\\)\n\nprint\\(\\)\nprint\\('=== Contatos 30d ==='\\)\nfor row in metricas['contatos_30d']:\n    print\\(f'  {row[\\\\\"nome_vendedor\\\\\"]}: {row[\\\\\"total\\\\\"]} contatos'\\)\n\nprint\\(\\)\nprint\\(f'=== Tocados 7d: {metricas[\\\\\"tocados_7d\\\\\"]} ==='\\)\n\" 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py shell --settings=config.settings.dev -c \"\nimport sys\nsys.stdout.reconfigure\\(encoding='utf-8'\\)\nfrom django.contrib.auth import get_user_model\nUser = get_user_model\\(\\)\nv1 = User.objects.get\\(username='vendedor1'\\)\ng1 = User.objects.get\\(username='gestor1'\\)\nprint\\('vendedor1 perfil.gestor pk:', v1.perfil.gestor_id\\)\nprint\\('gestor1 pk:', g1.pk\\)\n# Fix: set vendedor1 gestor to gestor1\nv1.perfil.gestor = g1\nv1.perfil.save\\(\\)\nprint\\('Corrigido! Novo gestor:', v1.perfil.gestor\\)\nfrom apps.carteira_ativa.services import listar_carteira\nprint\\('Clientes gestor1 agora:', listar_carteira\\(g1\\).count\\(\\)\\)\n\" 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py shell --settings=config.settings.dev -c \"\nfrom apps.crm.models import Cliente\nfrom apps.carteira_ativa.models import ContatoCarteira\nfrom django.contrib.auth import get_user_model\nUser = get_user_model\\(\\)\n# Remove dados do seed para teste limpo\nContatoCarteira.objects.filter\\(cliente__nome__startswith='Cliente Teste'\\).delete\\(\\)\nCliente.objects.filter\\(nome__startswith='Cliente Teste'\\).delete\\(\\)\nUser.objects.filter\\(username__in=['vendedor1','gestor1']\\).delete\\(\\)\nprint\\('Dados removidos para teste limpo'\\)\n\" 2>&1)",
      "Bash(cd /c/Users/Dell/source/repos/praxis_crm && venv/Scripts/python.exe manage.py shell --settings=config.settings.dev -c \"\nimport sys; sys.stdout.reconfigure\\(encoding='utf-8'\\)\nfrom django.contrib.auth import get_user_model\nfrom apps.carteira_ativa.services import obter_metricas_dashboard\nUser = get_user_model\\(\\)\ngestor1 = User.objects.get\\(username='gestor1'\\)\nm = obter_metricas_dashboard\\(gestor1\\)\nprint\\('=== KPIs ==='\\)\nfor k, v in m['kpis'].items\\(\\): print\\(f'  {k}: {v}'\\)\nprint\\(\\)\nprint\\('=== Por vendedor ==='\\)\nfor r in m['por_vendedor']: print\\(f'  {r[\\\\\"nome_vendedor\\\\\"]}: total={r[\\\\\"total\\\\\"]} sem={r[\\\\\"sem_contato\\\\\"]} verde={r[\\\\\"verde\\\\\"]} amarelo={r[\\\\\"amarelo\\\\\"]} vermelho={r[\\\\\"vermelho\\\\\"]}'\\)\nprint\\(\\)\nprint\\('=== Contatos 30d ==='\\)\nfor r in m['contatos_30d']: print\\(f'  {r[\\\\\"nome_vendedor\\\\\"]}: {r[\\\\\"total\\\\\"]} contatos'\\)\nprint\\(\\)\nprint\\(f'=== Tocados 7d: {m[\\\\\"tocados_7d\\\\\"]} ==='\\)\n\" 2>&1)"
    ]
  }
}
